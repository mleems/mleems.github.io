---
layout: post
title: 基于BootStrap3的Jekyll博客分页插件
categories: Jekyll JJ
tags: [静态博客,Jekyll]
---

<p>最近撸出来一个Jekyll的分页插件</p>

<p>恩其实也算不上是插件，只是用Liquid模板语言把分页逻辑友好地实现了一下。</p>

<p>与<code>plugins</code>目录下那些<code>.rb</code>的插件不同的是这款分页插件可以很好的支持Github Pages。</p>

<p>因为Github不允许自定义插件，但用Liquid语言以<code>include</code>的形式来实现就没有任何问题啦！这也可以算是这款插件的优势所在吧！
<!-- more --></p>

<p><del>话说还没给它起名字...</del></p>

<p>Jervan's Paginator，就起名叫JP吧...orz</p>

<p>在讲JP的分页逻辑之前先来聊聊Jekyll内置的分页器，因为JP是基于Jekyll内置分页器的。</p>

<p>我们知道如果想开启分页器功能只需要在<code>_config.yml</code>文件中定义<code>paginate</code>和<code>paginate_path</code>即可，比如这样</p>

<pre class="prettyprint prettyprinted" style=""><code><span class="pln">paginate</span><span class="pun">:</span><span class="pln"> </span><span class="lit">10</span><span class="pln">
paginate_path</span><span class="pun">:</span><span class="pln"> </span><span class="str">"/page:num"</span></code></pre>

<p>设置每页显示10篇文章，分页的路径是<code>/page</code>+数字这种形式。</p>

<p>JP在此基础上引入了新变量<code>paginator_barnum</code>来帮助实现友好分页，该变量表示分页条上能显示的最大页数。</p>

<p>来看几组效果图：</p>

<p><strong>1. 总页数不大于分页条上限</strong></p>

<ul class="pagination">
                        <li class="first disabled"><a>«</a></li>
                        <li class="previous disabled"><a>‹</a></li>
                        <li class="active"><a href="#" title="首页">1 <span class="sr-only">(current)</span></a></li>
                        <li><a href="#">2</a></li>
                        <li class="next"><a href="#" title="下一页">›</a></li>
                        <li class="last"><a href="#" title="末页">»</a></li>
</ul>

<p><br></p>

<ul class="pagination">
                        <li class="first"><a>«</a></li>
                        <li class="previous"><a>‹</a></li>
                        <li><a href="#" title="首页">1 </a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#">5</a></li>
                        <li><a href="#">6</a></li>
                        <li class="active"><a href="#">7</a></li>
                        <li><a href="#">8</a></li>
                        <li class="next"><a href="#" title="下一页">›</a></li>
                        <li class="last"><a href="#" title="末页">»</a></li>
</ul>

<p><br></p>

<ul class="pagination">
                        <li class="first disabled"><a>«</a></li>
                        <li class="previous disabled"><a>‹</a></li>
                        <li><a href="#" title="首页">1 </a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#">5</a></li>
                        <li><a href="#">6</a></li>
                        <li><a href="#">7</a></li>
                        <li><a href="#">8</a></li>
                        <li class="active"><a href="#">9</a></li>
                        <li class="next disabled"><a href="#" title="下一页">›</a></li>
                        <li class="last disabled"><a href="#" title="末页">»</a></li>
</ul>

<p><strong>2. 总页数大于分页条上限</strong></p>

<ul class="pagination">
                        <li class="first disabled"><a>«</a></li>
                        <li class="previous disabled"><a>‹</a></li>
                        <li class="active"><a href="#" title="首页">1 <span class="sr-only">(current)</span></a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li class="next"><a href="#" title="下一页">›</a></li>
                        <li class="last"><a href="#" title="末页">»</a></li>
</ul>

<p><br></p>

<ul class="pagination">
                        <li class="first"><a>«</a></li>
                        <li class="previous"><a>‹</a></li>
                        <li><a href="#">5</a></li>
                        <li><a href="#">6</a></li>
                        <li><a href="#">7</a></li>
                        <li><a href="#">8</a></li>
                        <li class="active"><a href="#">9</a></li>
                        <li><a href="#">10</a></li>
                        <li><a href="#">11</a></li>
                        <li><a href="#">12</a></li>
                        <li><a href="#">13</a></li>
                        <li class="next"><a href="#" title="下一页">›</a></li>
                        <li class="last"><a href="#" title="末页">»</a></li>
</ul>

<p><br></p>

<ul class="pagination">
                        <li class="first"><a>«</a></li>
                        <li class="previous"><a>‹</a></li>
                        <li><a href="#">7</a></li>
                        <li><a href="#">8</a></li>
                        <li><a href="#">9</a></li>
                        <li><a href="#">10</a></li>
                        <li><a href="#">11</a></li>
                        <li><a href="#">12</a></li>
                        <li class="active"><a href="#">13</a></li>
                        <li><a href="#">14</a></li>
                        <li><a href="#">15</a></li>
                        <li class="next"><a href="#" title="下一页">›</a></li>
                        <li class="last"><a href="#" title="末页">»</a></li>
</ul>

<p><br></p>

<ul class="pagination">
                        <li class="first"><a>«</a></li>
                        <li class="previous"><a>‹</a></li>
                        <li><a href="#">7</a></li>
                        <li><a href="#">8</a></li>
                        <li><a href="#">9</a></li>
                        <li><a href="#">10</a></li>
                        <li><a href="#">11</a></li>
                        <li><a href="#">12</a></li>
                        <li><a href="#">13</a></li>
                        <li><a href="#">14</a></li>
                        <li class="active"><a href="#">15</a></li>
                        <li class="next disabled"><a href="#" title="下一页">›</a></li>
                        <li class="last disabled"><a href="#" title="末页">»</a></li>
</ul>

<p>并且当总页数大于分页条上限时，分页条的右侧会出现跳页框方便跳转页面</p>

<p><strong>效果图：</strong></p>

<ul class="pagination">
        <form class="form-inline" role="form" action="javascript:page_jumping();">
          <div class="form-group">
            <label class="sr-only" for="page_jumping_num">pagenum</label>
            <input type="text" class="form-control" placeholder="共15页 / 142篇文章" id="page_jumping_num">
          </div>
          <button type="submit" class="btn btn-primary" id="page_jumping_btn">跳转</button>
        </form>
</ul><br>

总的来说JP的分页逻辑就是尽量确保当前页码在分页条的中间显示，后面我会放出JP的代码，注释比较详细，各位可以自己体会。
<br><br>

一些细节处理：

<ul>
<li>未设置或不正确设置<code>paginator_barnum</code>时JP会自动对<code>paginator_barnum</code>的值进行修正，JP默认的<code>paginator_barnum</code>值是9</li>
<li>跳页使用javascript实现</li>
<li>JP的CSS样式使用了BootStrap3，你可以换成其他样式但可能需要做大量的修改</li>
</ul>
<br>
<p>JP代码：<a href="https://github.com/MoonSnidget/jervan.me/blob/master/_includes/pagination">戳这</a></p>