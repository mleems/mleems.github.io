---
layout: post
title: z/OS 虚拟环境在Linux上的搭建
categories: 大型机 系统管理
tags: [Mainframe,Linux,OS]
---
<p><div class="toc"><div class="toc">
<ul>
<li><a href="#写在前面">〇、写在前面</a></li>
<li><a href="#一准备工作">一、准备工作</a><ul>
<li><a href="#硬件准备">1. 硬件准备</a></li>
<li><a href="#系统要求">2. 系统要求</a></li>
<li><a href="#软件准备">3. 软件准备</a></li>
<li><a href="#卷文件准备">3. 卷文件准备</a></li>
</ul>
</li>
<li><a href="#二系统环境">二、系统环境</a><ul>
<li><a href="#解决依赖问题">1. 解决依赖问题</a></li>
<li><a href="#二进制安装-编译安装">2. 二进制安装 &amp; 编译安装</a><ul>
<li><a href="#a-安装hercules">a. 安装Hercules</a></li>
<li><a href="#b-安装x">b. 安装x3270</a></li>
<li><a href="#c-安装hercustudio-非必须">c. 安装hercustudio * 非必须</a></li>
</ul>
</li>
<li><a href="#系统配置">3. 系统配置</a></li>
</ul>
</li>
<li><a href="#三配置文件">三、配置文件</a></li>
<li><a href="#四配置大机">四、配置大机</a></li>
<li><a href="#五结语">五、结语</a></li>
<li><a href="#六附录资源列表">六、附录：资源列表</a></li>
</ul>
</div>
</div>
</p>

<h1 class="wmd-title" id="写在前面">〇、写在前面</h1>

<hr>

<p>这篇文章是<a href="http://jervan.me/articles/how-to-make-a-virtual-environment-of-mainframe-on-windows/">z/OS 虚拟环境在Windows上的搭建</a>的姊妹篇，将主要介绍如何在Linux上搭建大机的虚拟环境。</p>

<h1 class="wmd-title" id="一准备工作">一、准备工作</h1>

<hr>

<h2 class="wmd-title" id="硬件准备">1. 硬件准备</h2>

<ul>
<li>一台配置中等或以上的PC/笔记本</li>
<li>最少10GB的硬盘空间</li>
<li>最少2GB的内存</li>
<li>一个支持虚拟化的CPU</li>
</ul>

<h2 class="wmd-title" id="系统要求">2. 系统要求</h2>

<ul>
<li>linux 2.6 内核或以上</li>
<li>推荐使用64位的RH系Linux，文中使用的是64位CentOS 6.3</li>
</ul>

<h2 class="wmd-title" id="软件准备">3. 软件准备</h2>

<ul>
<li>Hercules源码包或二进制包</li>
<li>x3270源码包</li>
<li>图形界面GUI——hercustudio源码包 *非必须</li>
</ul>

<h2 class="wmd-title" id="卷文件准备">3. 卷文件准备</h2>

<ul>
<li>z/OS 1.9 卷文件</li>
</ul>

<blockquote>
  <p>所需软件会在文末给出链接</p>
</blockquote>

<h1 class="wmd-title" id="二系统环境">二、系统环境</h1>

<hr>

<h2 class="wmd-title" id="解决依赖问题">1. 解决依赖问题</h2>

<p>我们使用的以<code>.CCKD</code>为后缀的卷文件实际上是<code>.CKD</code>文件通过<code>zlib</code>或<code>bzip2</code>压缩而来的，所以需要有这两个库支持。</p>

<pre class="prettyprint prettyprinted" style=""><code><span class="pln">yum install zlib</span><span class="pun">-</span><span class="pln">devel bzip2</span><span class="pun">-</span><span class="pln">devel</span></code></pre>

<p>Hercules的<strong>Hercules Automatic Operator</strong>（HAO）模块需要有<strong>Perl Compatible Regular Expression</strong>（PCRE）的支持，安装pcre包</p>

<pre class="prettyprint prettyprinted" style=""><code><span class="pln">yum install pcre</span><span class="pun">-</span><span class="pln">devel</span></code></pre>

<blockquote>
  <p>Debian系的系统如Ubuntu下可以用<code>apt-get install</code>对应的包来安装</p>
</blockquote>

<h2 class="wmd-title" id="二进制安装-编译安装">2. 二进制安装 &amp; 编译安装</h2>

<h3 class="wmd-title" id="a-安装hercules">a. 安装Hercules</h3>

<p>如果你不使用GUI的话直接用二进制文件安装会省事很多</p>

<pre class="prettyprint prettyprinted" style=""><code><span class="pln">rpm </span><span class="pun">-</span><span class="pln">ivh hercules</span><span class="pun">-</span><span class="lit">3.07</span><span class="pun">-</span><span class="lit">1.x86</span><span class="pln">_64</span><span class="pun">.</span><span class="pln">rpm</span></code></pre>

<p>如果你想使用GUI的话就要从源码来编译安装了</p>

<pre class="prettyprint prettyprinted" style=""><code><span class="pln">tar </span><span class="pun">-</span><span class="pln">zxvf hercules</span><span class="pun">-</span><span class="lit">3.07</span><span class="pun">.</span><span class="pln">tar</span><span class="pun">.</span><span class="pln">gz
cd hercules</span><span class="pun">-</span><span class="lit">3.07</span><span class="pln">
</span><span class="pun">./</span><span class="pln">configure </span><span class="pun">--</span><span class="pln">enable</span><span class="pun">-</span><span class="pln">external</span><span class="pun">-</span><span class="pln">gui  </span><span class="pun">--</span><span class="pln">enable</span><span class="pun">-</span><span class="pln">setuid</span><span class="pun">-</span><span class="pln">hercifc
make </span><span class="pun">&amp;&amp;</span><span class="pln"> make install</span></code></pre>

<p>其中<code>--enable-external-gui</code>表示启用GUI支持，<code>--enable-setuid-hercifc</code>与对hercules的授权有关，如果你是在root用户下使用hercules的话这项可以省略。</p>

<h3 class="wmd-title" id="b-安装x">b. 安装x3270</h3>

<p>x3270是目前唯一一款开源、免费的3270客户端（Windows下也有，巨丑，而且不太好用）。</p>

<p>x3270的官网没有提供编译好的二进制包所以需要我们自行编译安装，方法与编译安装Hercules类似，这个过程中视你系统情况而定也许会需要更新一些X11的文件。</p>

<h3 class="wmd-title" id="c-安装hercustudio-非必须">c. 安装hercustudio * 非必须</h3>

<p>hercustudio是Linux下的Hercules 图形界面工具，与Windows下的Hercules GUI类似。</p>

<p>Ubuntu的源里自带这个软件，Ubuntu中直接使用</p>

<pre class="prettyprint prettyprinted" style=""><code><span class="pln">apt</span><span class="pun">-</span><span class="kwd">get</span><span class="pln"> install hercustudio</span></code></pre>

<p>进行安装即可。</p>

<p>CentOS上仍然需要使用源码包编译安装，安装过程与上面类似不再赘述。</p>

<h2 class="wmd-title" id="系统配置">3. 系统配置</h2>

<p>下面需要对系统进行一些网络相关的配置</p>

<pre class="prettyprint prettyprinted" style=""><code><span class="pln">        </span><span class="pun">+----------------------------------+</span><span class="pln">
        </span><span class="pun">|</span><span class="pln">        </span><span class="typ">Linux</span><span class="pun">/</span><span class="pln">x86 </span><span class="pun">宿主机</span><span class="pln">           </span><span class="pun">|</span><span class="pln">
        </span><span class="pun">|</span><span class="pln">                                  </span><span class="pun">|</span><span class="pln">
        </span><span class="pun">+---------------+</span><span class="pln">                  </span><span class="pun">|</span><span class="pln">
        </span><span class="pun">|</span><span class="pln">  </span><span class="typ">Hercules</span><span class="pln">     </span><span class="pun">|</span><span class="pln">                  </span><span class="pun">+--------+</span><span class="pln">
        </span><span class="pun">|---------------|</span><span class="pln">                  </span><span class="pun">|</span><span class="pln">  eth0  </span><span class="pun">|</span><span class="pln">
        </span><span class="pun">|</span><span class="pln">   OS</span><span class="pun">/</span><span class="lit">390</span><span class="pln">      </span><span class="pun">|</span><span class="pln">      TCP</span><span class="pun">/</span><span class="pln">IP </span><span class="pun">------------------&gt;</span><span class="pln"> </span><span class="typ">Network</span><span class="pln">
        </span><span class="pun">|</span><span class="pln">   TCP</span><span class="pun">/</span><span class="pln">IP      </span><span class="pun">|</span><span class="pln">                  </span><span class="pun">|</span><span class="lit">10.1</span><span class="pun">.</span><span class="lit">2.1</span><span class="pun">|</span><span class="pln">
        </span><span class="pun">|---------------|</span><span class="pln">         </span><span class="pun">|</span><span class="pln">        </span><span class="pun">+--------+</span><span class="pln">
        </span><span class="pun">|</span><span class="pln">    CTCA       </span><span class="pun">|</span><span class="pln">         </span><span class="pun">|</span><span class="pln">        </span><span class="pun">|</span><span class="pln">
        </span><span class="pun">|</span><span class="lit">192.168</span><span class="pun">.</span><span class="lit">250.250</span><span class="pun">|</span><span class="pln">         </span><span class="pun">|</span><span class="pln">        </span><span class="pun">|</span><span class="pln">
        </span><span class="pun">+------|--------+</span><span class="pln">   </span><span class="lit">192.168</span><span class="pun">.</span><span class="lit">250.1</span><span class="pln">  </span><span class="pun">|</span><span class="pln">
        </span><span class="pun">|</span><span class="pln">  </span><span class="str">/dev/</span><span class="pln">tun             tun0       </span><span class="pun">|</span><span class="pln">
        </span><span class="pun">|</span><span class="pln">      </span><span class="pun">|</span><span class="pln">                  </span><span class="pun">|</span><span class="pln">        </span><span class="pun">|</span><span class="pln">
        </span><span class="pun">|</span><span class="pln">      </span><span class="pun">+------------------+</span><span class="pln">        </span><span class="pun">|</span><span class="pln">
        </span><span class="pun">|</span><span class="pln">       </span><span class="typ">Virtual</span><span class="pln"> CTC link           </span><span class="pun">|</span><span class="pln">
        </span><span class="pun">|</span><span class="pln">                                  </span><span class="pun">|</span><span class="pln">
        </span><span class="pun">+----------------------------------+</span></code></pre>

<p>图 00-网络拓扑</p>

<p>得益于国外某大神Willem Konynenberg的研究成果，使得Hercules下运行系统的TCP/IP栈与宿主机的TCP/IP栈之间的通信成为了可能。</p>

<p>虚拟CTC连接创建一个隧道(tunnel)<code>/dev/net/tun</code>或<code>/dev/tun0</code>，对Hercules来说它是一个字符型设备，对宿主机来说它是一个虚拟网络接口。Hercules的3088网络驱动会让运行在Hercules下的系统（如z/OS）把tun设备识别为CTCA（Channel to Channel Adapter）。这样一来，每个链接终端就都有了一个不同于宿主机真实IP的只属于它自己的IP地址</p>

<p>授权：</p>

<pre class="prettyprint prettyprinted" style=""><code><span class="pln">chown root</span><span class="pun">:</span><span class="pln">jervan </span><span class="pun">/</span><span class="pln">dev</span><span class="pun">/</span><span class="pln">net</span><span class="pun">/</span><span class="pln">tun </span><span class="com">#(把jervan替换成你运行hercules用户所在的组) </span><span class="pln">
chmod </span><span class="lit">0660</span><span class="pln"> </span><span class="pun">/</span><span class="pln">dev</span><span class="pun">/</span><span class="pln">net</span><span class="pun">/</span><span class="pln">tun
chgrp jervan </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">hercifc </span><span class="com">#(把jervan替换成你运行hercules用户所在的组) </span><span class="pln">
chmod </span><span class="lit">4750</span><span class="pln"> </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">hercifc </span></code></pre>

<p>开启ip转发：
编译<code>/etc/sysctl.conf</code>文件把<code>net.ipv4.ip_forward</code>的值设置为1</p>

<pre class="prettyprint prettyprinted" style=""><code><span class="pln">echo </span><span class="str">"1"</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="str">/proc/</span><span class="pln">sys</span><span class="pun">/</span><span class="pln">net</span><span class="pun">/</span><span class="pln">ipv4</span><span class="pun">/</span><span class="pln">ip_forward</span></code></pre>

<h1 class="wmd-title" id="三配置文件">三、配置文件</h1>

<hr>

<pre class="prettyprint prettyprinted" style=""><code><span class="com"># Sample configuration file for Hercules ESA/390 emulator</span><span class="pln">
ARCHMODE  z</span><span class="pun">/</span><span class="typ">Arch</span><span class="pln">  </span><span class="com">#系统架构，可选：z/Arch(64Bit),S/370, ESA/390 or ESAME</span><span class="pln">
ALRF      ENABLE
CNSLPORT  </span><span class="lit">3270</span><span class="pln">    </span><span class="com">#Hercules监听端口</span><span class="pln">
CONKPALV  </span><span class="pun">(</span><span class="lit">3</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">10</span><span class="pun">)</span><span class="pln">
CPUMODEL  </span><span class="lit">3090</span><span class="pln">
CPUSERIAL </span><span class="lit">012345</span><span class="pln">
DIAG8CMD  ENABLE
ECPSVM    NO
LOADPARM  </span><span class="lit">0A83MYM1</span><span class="pln"> </span><span class="com">#IPL启动参数</span><span class="pln">
LPARNAME  HERCULES </span><span class="com">#逻辑分区（logic partition）名称</span><span class="pln">
MAINSIZE  </span><span class="lit">2048</span><span class="pln">     </span><span class="com">#为虚拟大机分配的最大内存</span><span class="pln">
MOUNTED_TAPE_REINIT  DISALLOW
NUMCPU    </span><span class="lit">4</span><span class="pln">        </span><span class="com">#为虚拟大机分配的CPU core数量（不超过你PC的最大Core）</span><span class="pln">
OSTAILOR  Z</span><span class="pun">/</span><span class="pln">OS
PANRATE   </span><span class="lit">80</span><span class="pln">       </span><span class="com">#面板刷新频率</span><span class="pln">
PGMPRDOS  LICENSED
SHCMDOPT  NODIAG8
SYSEPOCH  </span><span class="lit">1900</span><span class="pln">    </span><span class="com">######</span><span class="pln">
TIMERINT  </span><span class="lit">50</span><span class="pln">      </span><span class="com">#时区控制相关</span><span class="pln">
TZOFFSET  </span><span class="pun">+</span><span class="lit">1400</span><span class="pln">   </span><span class="com">#</span><span class="pln">
YROFFSET  </span><span class="lit">0</span><span class="pln">       </span><span class="com">#</span><span class="pln">
HERCPRIO  </span><span class="lit">0</span><span class="pln">       </span><span class="com">######</span><span class="pln">
TODPRIO   </span><span class="pun">-</span><span class="lit">20</span><span class="pln">     </span><span class="com"># 设置优先级</span><span class="pln">
DEVPRIO   </span><span class="lit">8</span><span class="pln">       </span><span class="com">#</span><span class="pln">
CPUPRIO   </span><span class="lit">0</span><span class="pln">       </span><span class="com">###### </span><span class="pln">
PANTITLE  </span><span class="str">"z/OS 1.9 IPL A80"</span><span class="pln">  </span><span class="com">#控制面板名</span><span class="pln">

</span><span class="com"># Display Terminals  3270   TERMINAL</span><span class="pln">
</span><span class="lit">0700.10</span><span class="pln">  </span><span class="lit">3270</span><span class="pln">
</span><span class="com">#  |       |----设备类型，3270表示3270客户端</span><span class="pln">
</span><span class="com">#  |</span><span class="pln">
</span><span class="com">#  |--------------------0700是设备号（16进制），后面的.10表示从0700开始的10个设备</span><span class="pln">
</span><span class="com">#</span><span class="pln">



</span><span class="com">#DASD Devices</span><span class="pln">
</span><span class="com">#IBM Emulation Files</span><span class="pln">
</span><span class="lit">0A80</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9RES1</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A81</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9RES2</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A82</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9SYS1</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A83</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9RES3</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A84</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9USS1</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A85</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9PRD1</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A86</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9DIS1</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A87</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9DIS2</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A88</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9DIS3</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A89</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9DIS4</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A8A</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9DIS5</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A8B</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9DIS6</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A8C</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">SARES1</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A8D</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9CIC1</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A8E</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9DB81</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A8F</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9DB82</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A90</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9DB91</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A91</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9DB92</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A92</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9IMS1</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A93</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9WAS1</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A94</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9WAS2</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="lit">0A95</span><span class="pln">    </span><span class="lit">3390</span><span class="pln">    </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">MF</span><span class="pun">/</span><span class="pln">CCKD</span><span class="pun">/</span><span class="pln">zos_1</span><span class="pun">.</span><span class="lit">9</span><span class="pun">/</span><span class="pln">IBM</span><span class="pun">/</span><span class="pln">Z9WAS3</span><span class="pun">.</span><span class="pln">CCKD
</span><span class="com"># |      |                     |</span><span class="pln">
</span><span class="com"># |      |                     |------卷文件路径，一般为绝对路径，也可用相对路径</span><span class="pln">
</span><span class="com"># |      |</span><span class="pln">
</span><span class="com"># |      |---------设备类型，3390表示IBM3390型磁盘，3390-3、3390-9型等磁盘这一都写为3390</span><span class="pln">
</span><span class="com"># |</span><span class="pln">
</span><span class="com"># |</span><span class="pln">
</span><span class="com"># |----设备号</span><span class="pln">


</span><span class="com"># CTC Adapters</span><span class="pln">
</span><span class="lit">0E20</span><span class="pun">.</span><span class="lit">2</span><span class="pln">  </span><span class="lit">3088</span><span class="pln">    CTCI    </span><span class="lit">192.168</span><span class="pun">.</span><span class="lit">250.250</span><span class="pln"> </span><span class="lit">192.168</span><span class="pun">.</span><span class="lit">250.1</span><span class="pln">
</span><span class="com"># |      |              -----------------------------</span><span class="pln">
</span><span class="com"># |      |                           |------------192.168.250.250是为大机分配的IP</span><span class="pln">
</span><span class="com"># |      |                                        192.168.250.1是大机网关IP,</span><span class="pln">
</span><span class="com"># |      |----3088表示网络设备                    Hercules会根据你分配的IP自动建立TUN隧道</span><span class="pln">
</span><span class="com"># |</span><span class="pln">
</span><span class="com"># |------设备号</span></code></pre>

<p>配置文件的写法基本与在Windows下相同，只有CTC适配器部分略有差别，有没有觉得Linux下的写法更简洁直观？</p><h1 class="wmd-title" id="四配置大机">四、配置大机</h1>

<hr>

<p>大机的配置部分与在Windows下搭建时几乎完全一样，参见<a href="http://jervan.me/articles/how-to-make-a-virtual-environment-of-mainframe-on-windows/#四配置大机">z/OS 虚拟环境在Windows上的搭建</a></p><h1 class="wmd-title" id="五结语">五、结语</h1>

<hr>

<p>这篇文章到这里差不多也就完事了。</p>

<p>可能有人会问虚拟的大机系统跑在Windows和Linux上有什么差别。我也只能从我的经历来回答说你会明显的感觉到相同条件下在Linux上的大机性能要完爆Windows上的大机。并且，如果需要几个人连到虚拟大机进行什么工作的话，在Windows上你会看到所有的登陆IP都是大机网关IP，而在Linux上显示的是登陆者实际的IP</p><h1 class="wmd-title" id="六附录资源列表">六、附录：资源列表</h1>

<hr>

<ul>
<li>Hercules：<a href="http://www.hercules-390.org/">http://www.hercules-390.org/</a> 或 <a href="http://www.hercules-390.eu/">http://www.hercules-390.eu/</a></li>
<li>x3270：<a href="http://x3270.bgp.nu/">http://x3270.bgp.nu/</a></li>
<li>Hercules Studio：<a href="http://www.mvsdasd.org/hercstudio/">http://www.mvsdasd.org/hercstudio/</a></li>
</ul>

<ul style="color:black;background:black" title="我什么都不知道">我什么都不知道：jervan.me/images/how-to-make-a-virtual-environment-of-mainframe-on-windows/zos1.9.txt</ul>